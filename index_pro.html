<!DOCTYPE html>
<html lang="en">
<!-- Latest compiled and minified CSS -->

<!--
Implementa un lloc web senzill amb Bootstrap i JQuery que:

- Demani un nom d'usuari de GitHub

- Mostri una taula amb els repositoris de l'usuari seleccionat amb (com a mínim): nom, descripció, nombre de seguidors

- El disseny no és realment important, però hauria d'utilitzar components de Bootstrap

- El quadre d'entrada per al nom d'usuari pot estar a la mateixa pàgina o poden ser dues pàgines: una per demanar el nom i l'altra per mostrar els repositoris

- El lloc web ha d'estar emmagatzemat en un repositori de GitHub! El resultat d'aquesta tasca, que s'enviarà a Atenea, és un fitxer de text amb l'URL del vostre repositori.
-->

<!-- Latest compiled and minified CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <h1 class="text-center" style="margin-top: 100px;">GitHub Repository User Information</h1>
    <div class="text-center" style="margin-top: 50px;" >Top trending developers in GitHub: mitchellh, tonioller, ayangweb</div>
    <input type="text" style="display:block; margin: 0 auto; margin-top: 100px; width: 300px;" id="username" placeholder="   Enter the username">
    <button id="submit" style="display:block; margin: 0 auto; margin-top: 50px; width: 100px;">Submit</button>

<div class="container mt-3" id="repoTable">
<script>
    $(document).ready(function() {
      $("#submit").click(function() {
        let username = $("#username").val();
        let url = `https://api.github.com/users/${username}/repos`;

        $.ajax({
          url: url,
          method: "GET",
          dataType: "json",
          success: function(repos) {
            let html = `
              <table class="table table-striped" style="margin-top: 50px;">
                <thead>
                  <tr>
                    <th>Repository</th>
                    <th>Description</th>
                    <th>Stars</th>
                  </tr>
                </thead>
                <tbody>
            `;

            for (let i = 0; i < repos.length; i++) {
              let repo = repos[i];
              html += `
                <tr>
                  <td>${repo.name}</td>
                  <td>${repo.description || "No description"}</td>
                  <td>${repo.stargazers_count}</td>
                </tr>
              `;
            }

            html += `</tbody></table>`;

            $("#repoTable").html(html); // inject at once
          },
          error: function() {
            alert("User not found or error fetching repos.");
          }
        });
      });
    });
</script>
</body>
</html>